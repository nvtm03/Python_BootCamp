from bs4 import BeautifulSoup


input_file = '../../materials/evilcorp.html'
output_file = '../../materials/evilcorp_hacked.html'
with open(input_file, 'r') as fp:
    soup = BeautifulSoup(fp, 'lxml')

# 2
soup.title.string = 'Evil Corp - Stealing your money every day'

# 3
name = soup.find('span').text
new_tag = soup.new_tag('h1')
new_tag.string = name + ', you are hacked!'
# print(new_tag)
soup.find('body').insert(1, new_tag)

# 4
with open('trenton_scritp.html', 'r') as script:
    soup.find('body').append(BeautifulSoup(script, 'lxml').find('script'))

# finally
soup.a['href'] = 'https://mrrobot.fandom.com/wiki/Fsociety'
soup.a.string = 'Fsociety'

with open(output_file, 'w') as output:
    print(soup.prettify(), file=output)
